<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Maui.Controls.Sample.Issues"
             x:Class="Maui.Controls.Sample.Issues.Issue31150"
             Title="Issue31150">
    <ScrollView>
        <StackLayout Padding="20">
            
            <!-- Test Layout with explicit WidthRequest/HeightRequest -->
            <Label Text="Custom Layout with WidthRequest=200, HeightRequest=150:"
                   FontAttributes="Bold" 
                   Margin="0,0,0,10"/>
            
            <local:Issue31150CustomLayout x:Name="TestLayout"
                                          WidthRequest="200"
                                          HeightRequest="150"
                                          BackgroundColor="LightBlue"
                                          AutomationId="Issue31150TestLayout">
                
                <!-- Child view with explicit dimensions -->
                <Label Text="Child 1"
                       WidthRequest="80"
                       HeightRequest="40"
                       BackgroundColor="LightGreen"
                       HorizontalOptions="Start"
                       VerticalOptions="Start"
                       AutomationId="Issue31150Child1"/>
                
                <!-- Child view without explicit dimensions -->
                <Label Text="Child 2"
                       BackgroundColor="LightPink"
                       HorizontalOptions="End"
                       VerticalOptions="End"
                       AutomationId="Issue31150Child2"/>
                       
            </local:Issue31150CustomLayout>
            
            <!-- Test results display -->
            <Label Text="Test Results:" 
                   FontAttributes="Bold" 
                   Margin="0,20,0,10"/>
            
            <Label x:Name="LayoutConstraintsResult"
                   Text="Layout constraints: Not measured yet"
                   AutomationId="Issue31150LayoutConstraintsResult"
                   BackgroundColor="LightYellow"
                   Padding="5"/>
            
            <Label x:Name="ChildConstraintsResult"
                   Text="Child constraints: Not measured yet"
                   AutomationId="Issue31150ChildConstraintsResult"
                   BackgroundColor="LightYellow"
                   Padding="5"
                   Margin="0,5,0,0"/>
                   
            <!-- Button to trigger re-measurement -->
            <Button Text="Trigger Measurement"
                    x:Name="TriggerButton"
                    AutomationId="Issue31150TriggerButton"
                    Clicked="OnTriggerClicked"
                    Margin="0,20,0,0"/>
                    
            <!-- Status indicator for test completion -->
            <Label x:Name="TestStatus"
                   Text="Test Status: Not Started"
                   AutomationId="Issue31150TestStatus"
                   BackgroundColor="LightGray"
                   Padding="5"
                   Margin="0,10,0,0"/>
            
        </StackLayout>
    </ScrollView>
</ContentPage>